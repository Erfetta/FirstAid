<!-- app/views/operatorpage/home/operator_index.html.erb -->
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="container_navbar_operator">
        <nav class="navbar_operator">
            <%= button_to root_path, method: :get, class: 'nav-button_operator' do %>
              <span class="material-symbols-outlined">
                home
              </span>
            <% end %>
            <%= button_to manual_list_path, method: :get, class: 'nav-button_operator' do %>
              <span class="material-symbols-outlined">
                import_contacts
              </span>
            <% end %>
            <%= button_to report_history_list_path, method: :get, class: 'nav-button_operator' do %>
              <span class="material-symbols-outlined">
                history
              </span>
            <% end %>
            <%= button_to profile_path, method: :get, class: 'nav-button_operator' do %>
              <span class="material-symbols-outlined">
                person
              </span>
            <% end %>
        </nav>

        <div class="central_section_operator">
          <div class="map-chat-section_op">
            <div class="maps_section_operator_reduced">
              <!-- da inserire google maps -->
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3153.0899743766096!2d-122.40060808468155!3d37.78583477975862!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8085808f5f5f5f5f%3A0x5a5a5a5a5a5a5a5a!2sSan%20Francisco%2C%20CA%2C%20USA!5e0!3m2!1sen!2sin!4v1638183510984!5m2!1sen!2sin"
                width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy">
              </iframe>
            </div>
            <div class="chat_section_operator">
              <!-- da inserire chat con utente -->
              <p> Chat </p>
            </div>
            <div class="map-chat_selector">
                <button class="map-chat_selector_button1" id="select-map_button"><span class="material-symbols-outlined">map</span></button>
                <button class="map-chat_selector_button2" id="select-chat_button"><span class="material-symbols-outlined">forum</span></button>
            </div>
          </div>
          <div class="report_info_operator">
            <h2>Dettagli della richiesta</h2>
            <div class="report_info_container">
              <div class="report_info_c1">
                <h3>Informazioni richiesta</h3>
                <p><strong>Richiesta n°:</strong> <%= @report.id %></p>
                <% datetime = @report.created_at.to_s.split(' ')%>
                <p><strong>Data: </strong><%= datetime[0] %></p>
                <p><strong>Orario:</strong> <%= datetime[1] %></p>
                <p><strong>Coordinate:</strong> <%= @report.coordinates %></p>
                <p><strong>Modalità di contatto:</strong> <%= @report.contact_method %></p>
                <%= button_to 'Prendi incarico', update_op_id_path(@report), method: :patch, class: 'report-button_operator chooseReportBtn' %>
                <%= button_to 'Rimuovi incarico', remove_me_from_report_path(@report), method: :patch, class: 'report-button_operator removeReportBtn' %>
                <% if @rep_taken%>
                <style>
                  .chooseReportBtn {
                    display: none;
                  }
                  .removeReportBtn{
                    display: block;
                  }
                </style>
                <% else %>
                <style>
                  .chooseReportBtn {
                    display: block;
                  }
                  .removeReportBtn{
                    display: none;
                  }
                </style>
                <% end %>
              </div>
              <div class="report_info_c2">
                <h3>Informazioni paziente</h3>
                <div class="report_info_c2_sub">
                  <p><strong>Domanda 1:</strong> <%= @report.question1 %></p>
                  <p><strong>Domanda 2:</strong> <%= @report.question2 %></p>
                  <p><strong>Domanda 3:</strong> <%= @report.question3 %></p>
                  <p><strong>Domanda 4:</strong> <%= @report.question4 %></p>
                  <p><strong>Domanda 5:</strong> <%= @report.question5 %></p>
                  <p><strong>Domanda 6:</strong> <%= @report.question6 %></p>
                  <p><strong>Domanda 7:</strong> <%= @report.question7 %></p>
                  <p><strong>Domanda 8:</strong> <%= @report.question8 %></p>
                  <p><strong>Domanda 9:</strong> <%= @report.question9 %></p>
                  <p><strong>Domanda 10:</strong> <%= @report.question10 %></p>
                  <p><strong>Domanda 11:</strong> <%= @report.question11 %></p>
                  <p><strong>Domanda 12:</strong> <%= @report.question12 %></p>
                  <p><strong>Domanda 13:</strong> <%= @report.question13 %></p>
                  <p><strong>Domanda 14:</strong> <%= @report.question14 %></p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="user_info_operator">
            <h2>Informazioni utente</h2>
            <p><strong>User ID:</strong> <%= @user.id %></p>
            <p><strong>Nome:</strong> <%= @user.name %></p>
            <p><strong>Cognome:</strong> <%= @user.surname %></p>
            <p><strong>Età:</strong> <%= @user.age %></p>
            <p><strong>Sesso:</strong> <%= @user.sex %></p>
            <p><strong>Cellulare:</strong> <%= @user.phone %></p>
        </div>
    </div>
</body>
<script>

  const mapButton = document.getElementById('select-map_button');
  const chatButton = document.getElementById('select-chat_button');
  const mapSection = document.querySelector('.maps_section_operator_reduced');
  const chatSection = document.querySelector('.chat_section_operator');

  mapButton.addEventListener('click', () => {
    mapSection.style.display = 'flex';
    chatSection.style.display = 'none';
    mapButton.style.backgroundColor = '#eee';
    chatButton.style.backgroundColor = '#fff';
  });

  chatButton.addEventListener('click', () => {
    mapSection.style.display = 'none';
    chatSection.style.display = 'flex';
    chatButton.style.backgroundColor = '#eee';
    mapButton.style.backgroundColor = '#fff';
  });

</script>
</html>
